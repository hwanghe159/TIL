- 발표 영상 https://youtu.be/dJ5C4qRqAgA
- 발표자료 https://www.slideshare.net/baejjae93/ss-151545329



## 설계란?

- "어디에다가 어떤 코드를 배치할 것인가?" 에 대한 의사결정
- 같이 변경되는 코드를 같이 배치해야 하고 따로 변경되는 코드는 분리한다.
- 변경의 핵심은? 의존성!

## 의존성?

- A가 B에 의존한다 : B가 변경되면 A도 변경될 수 있다
- 클래스 사이의 의존성이 있고 패키지 사이의 의존성이 있다.

### 클래스 사이의 의존성

![class_dependency](../images/class_dependency.png)

- 연관관계

  - "A에서 B로 이동할 수 있어요."

  - A에서 B로 영구적으로 갈 수 있는 경로가 있음

    ```java
    class A {
      private B b;
    }
    ```

- 의존관계

  - 파라미터에 그 타입이 나오거나, 리턴 타입에 그 타입이 나오거나, 메서드 안에서 그 타입의 인스턴스를 생성한다

  - 협력을 하는 어떤 시점에 일시적으로 관계를 맺고 헤어지는 관계

    ```java
    class A {
      public B method(B b){
        return new B();
      }
    }
    ```

- 상속관계

  - 구현이 바뀌더라도 영향을 받을 수 있음

    ```java
    class A extends B {
    }
    ```

- 실체화 관계

  - 인터페이스의 시그니처가 바뀌었을때만 영향을 받음

    ```java
    class A implements B {
    }
    ```

### 패키지 사이의 의존성

![package_dependency](/Users/hwangjunho/Documents/GitHub/TIL/images/package_dependency.png)

- "패키지B안에 있는 클래스가 바뀌면 패키지A에 있는 클래스가 바뀌어요"
- "import문에 다른 패키지의 클래스가 존재해요"

### 좋은 의존성을 관리하기 위한 몇가지 규칙

- 양방향 의존성을 피하라 : 양방향이 이루어지는 건 하나의 클래스를 억지로 찢어놓은 것일수도 있다

- 다중성이 적은 방향을 선택하라

  ```java
  class A {
    private Collection<B> bs;
  }
  class B {
  }
  //보다는
  
  class A {
  }
  class B {
    private A a;
  }
  //가 낫다.
  ```

- 의존성이 필요없다면 제거하라

- 패키지 사이의 의존성 사이클을 제거하라

  packageA -> packageB -> packageC -> packageA 이런 경우 세 패키지는 하나로 묶여야 한다

