인덱스?

- 지정한 컬럼들을 기준으로 메모리 영역에 일종의 목차를 생성하는 것
- 인덱스를 검색하기 위한 일차 조건은 WHERE절에 인덱스를 생성한 열이 나와야 한다
- 장점
  - 검색 속도가 빨라질 수 있다
  - 쿼리의 부하가 줄어서 시스템 전체의 성능이 향상될 수 있다
- 단점
  - 추가적인 공간이 필요하다
  - 처음 인덱스를 생성하는데 시간이 많이 소요될 수 있다
  - 데이터의 변경 작업이 자주 일어날 경우, 오히려 성능이 나빠질 수 있다

인덱스의 종류

- 클러스터형 인덱스(Clustered Index)
  - 테이블 당 하나만 생성할 수 있음
  - 인덱스로 지정한 열에 맞춰 행 데이터를 자동 정렬한다
  - pk로 지정한 열에는 자동으로 클러스터형 인덱스가 생성된다
  - 영어사전 같은 느낌
- 보조 인덱스(Secondary Index)
  - 테이블 당 여러개 생성 할 수 있음
  - uk로 지정하면 자동으로 보조 인덱스가 생성된다
  - 책 뒤의 찾아보기 느낌

인덱스 스캔 종류

- index range scan
  - B-tree 인덱스의 가장 일반적이고 정상적인 형태의 액세스 방식
  - 인덱스 루트에서 리프 블록까지 수직적 탐색을 하고, 필요한 범위만큼 수평적 탐색하는 스캔 방식
  - 검색해야 할 인덱스의 범위가 결정되었을 때 사용하는 방식
  - 인덱스를 구성하는 선두 컬럼이 조건절에 사용되어야 함
  - sort order by 연산을 생략하거나 min/max값을 빠르게 추출할 수 있음
- index full scan
  - 수직적 탐색 없이 인덱스 리프 블록 처음부터 끝까지 수평적으로 탐색하는 방식
  - 대개는 데이터 검색을 위한 최적의 인덱스가 없을 때 차선으로 선택됨
  - 인덱스 선두 컬럼이 조건절에 없으면 옵티마이저는 우선적으로 Table Full Scan을 고려함
  - 주로 쿼리가 인덱스에 명시된 컬럼만으로 조건을 처리할 경우에 이 방식이 사용됨. 인덱스 뿐만 아니라 데이터 레코드까지 모두 읽어야 한다면 이 방식이 이용되지 않음.
  - 예 : 인덱스의 컬럼은 (A, B, C)로 만들어져 있지만 조건절에는 B나 C 컬럼으로 검색하는 경우
- index fast full scan
  - Select 절과 조건절에 사용된 모든 컬럼이 인덱스 컬럼으로 구성되어 있어 테이블을 검색하지 않고 인덱스의 블록만을 스캔하여 원하는 데이터를 검색하는 방식
  - 인덱스 트리구조를 무시하고 인덱스 세그먼트 전체를 Multiblock Read방식으로 스캔하기 때문에 index full scan보다 빠름
- index skip scan
  - 루트 또는 브랜치 블록에서 읽은 컬럼 값 정보를 이용해 조건에 부합하는 레코드를 포함할 ‘가능성이 있는’ 리프 블록만 골라서 액세스하는 방식
  - 좌측에 있는 리프 블록과 가장 마지막 리프블록도 항상 방문