# 스프링 배치 완벽 가이드 2/e

## 2장. 스프링 배치

### 스텝

- 잡을 구성하는 독립된 작업의 단위
- 스텝은 두가지 유형이 있음
  1. tasklet기반 스텝
     - 비교적 더 간단함
     - `Tasklet`을 구현하면 됨. 스텝이 중지될 때까지 `execute`메서드가 계속 반복해서 수행된다
     - 초기화, 저장 프로시저 실행, 알림 전송 등과 같은 잡에서 사용
  2. chunk기반 스텝
     - 약간 더 복잡함
     - 아이템 기반 처리에 사용
     - `ItemReader`, `ItemProcessor`(필수x), `ItemWriter`으로 구성
- 스텝을 분리하는 것의 이점
  1. 유연성 : 재사용할 수 있도록 여러 빌더 클래스 제공
  2. 유지보수성 : 각 스텝은 독립적 -> 여러 잡에서 재사용 가능
  3. 확장성 : 스텝을 병렬로 실행할 수 있는 등의 확장 가능한 기능 제공
  4. 신뢰성 : 오류 처리 방법 제공

### `JobRepository`

- 다양한 배치 수행과 관련된 수치 데이터, 잡의 상태를 유지/관리
- 실행된 스텝, 현재 상태, 읽은 아이템 수, 처리된 아이템 수 등이 저장됨
- 관계형 데이터베이스 사용
- 스프링 배치 내의 대부분의 주요 컴포넌트가 공유

### `JobLauncher`

- `Job.execute`를 실행하는 역할
- 잡의 재실행 가능 여부 검증, 잡의 실행 방법, 파라미터 유효성 검증 등의 처리도 함

### `Job`, `JobInstance`, `JobExecution`

- `JobInstance` : 배치 잡의 논리적인 실행. "잡의 이름"과 "식별 파라미터"로써 유일하게 존재한다.
- `JobExecution` : 배치 잡의 실제 실행. 잡을 구동할때마다 새로운 JobExecution을 얻는다.

-> 한 잡을 같은 파라미터를 2번 실행했는데 첫번째는 실패, 두번째는 성공했다면 `JobInstance`는 1개, `JobExecution`는 2개
