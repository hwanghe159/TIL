# 스프링 배치

## 스프링 배치 계층구조

![spring-batch-structure](../images/spring-batch-structure.jpeg)

- Application: 개발자가 작성한 모든 배치 작업과 사용자 정의 코드 포함
- Batch Core: 배치 작업을 시작하고 제어하는데 필요한 핵심 런타임 클래스 포함 (`JobLauncher`, `Job`, `Step`)
- Batch Infrastructure: 개발자와 어플리케이션에서 사용하는 일반적인 Reader와 Writer 그리고 RetryTemplate과 같은 서비스를 포함

## 도메인 용어

![spring-batch-reference-model](/Users/hwangjunho/Documents/GitHub/TIL/images/spring-batch-reference-model.png)

- Job(Flow) : 배치 작업

  -  최소 하나의 Step을 가져야 한다 (2~10개의 Step권장)

- Step
  - 읽기(ItemReader) -> 가공하기(ItemProcessor) -> 쓰기(ItemWriter)의 묶음 (Chunk processing)

  - Chunk processing의 컨셉

    ```java
    List items = new Arraylist();
    for (int i = 0; i < commitInterval; i++) {
        Object item = itemReader.read()
        Object processedItem = itemProcessor.process(item);
        items.add(processedItem);
    }
    itemWriter.write(items);
    ```

- Tasklet: Step안에서 수행될 비즈니스 로직 전략의 인터페이스

